<Page x:Name="pageNewEvent" x:Class="TrailMeister.GUI.Main.PageNewEvent"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:TrailMeister.GUI.Main"
      xmlns:diag="clr-namespace:System.Diagnostics;assembly=WindowsBase"
      xmlns:converters="clr-namespace:TrailMeisterUtilities.Converters;assembly=TrailMeisterUtilities"
      mc:Ignorable="d" 
      d:DesignHeight="800" d:DesignWidth="1200"
      Title="New Event">
    
    <Page.Resources>
        <converters:Tag2PersonConverter x:Key="Tag2PersonConverter"/>
    </Page.Resources>
    
    <Grid Margin="8,8,8,8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Adjusts to content size - Event name label and textbox -->
            <RowDefinition Height="*" />
            <!-- Takes up remaining space -->
            <RowDefinition Height="Auto" />
            <!-- Adjusts to content size -->
        </Grid.RowDefinitions>
        
        <Label Name="lblEventName" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Top" Height="48" Width="1019" FontSize="36" Content="Name of event:"/>
        <!--<TextBox x:Name="tbEventName"  Grid.Row="0" Text="{Binding EventName, UpdateSourceTrigger=PropertyChanged}" 
                 HorizontalAlignment="Stretch" TextWrapping="Wrap" VerticalAlignment="Top" 
                 Height="75" FontSize="48" FontFamily="Segoe UI Semibold" Margin="0,64,0,4" />-->
        <ComboBox x:Name="cbEventName"  Grid.Row="0" Text="{Binding EventName, UpdateSourceTrigger=PropertyChanged}"
                  HorizontalAlignment="Stretch" VerticalAlignment="Top" 
                  Height="75" FontSize="48" FontFamily="Segoe UI Semibold" Margin="0,64,0,4" IsEditable="True" />

        <Grid Grid.Row="1" Margin="0,4,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Label x:Name="lblParticipants" Content="Participants" 
                   Grid.Row="0"
                   HorizontalAlignment="Left" VerticalAlignment="Top" 
                   FontSize="36" Width="1020"/>
            <DataGrid x:Name="gridParticipants" 
                  ItemsSource="{Binding DataContext.AllTags, ElementName=gridParticipants}" 
                  KeyUp="gridParticipants_KeyUp" 
                  IsSynchronizedWithCurrentItem="False"
                  Grid.Row="1"
                  FontSize="24" AutoGenerateColumns="False" GridLinesVisibility="All" HorizontalAlignment="Stretch" >

                <DataGrid.Columns>
                    <DataGridTextColumn x:Name="colID" CanUserResize="False" Width="1*" Header="ID" Binding="{Binding TagId}" IsReadOnly="true" MinWidth="50">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right" />
                                <Setter Property="Padding" Value="8 0 8 0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTemplateColumn x:Name="colName" Width="4*" Header="Name" IsReadOnly="false" MinWidth="300">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <!--<TextBox x:Name="tbNameEdit" FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}" Text="{Binding HumanName, Mode=TwoWay,
             UpdateSourceTrigger=LostFocus}" BorderThickness="0" Margin="8,0,8,0" GotFocus="tbNameEdit_GotFocus" Loaded="tbNameEdit_Loaded" >
                                </TextBox>-->

                                <Label HorizontalAlignment="Left" VerticalAlignment="Top">
                                    <Label.Content>
                                        <MultiBinding Converter="{StaticResource Tag2PersonConverter}"
                                                      diag:PresentationTraceSources.TraceLevel="High">
                                            <Binding Path="PersonId"
                                                     diag:PresentationTraceSources.TraceLevel="High"/>
                                            <Binding Path="DataContext.AllPeople" RelativeSource="{RelativeSource AncestorType=Page}"
                                                     />
                                        </MultiBinding>
                                    </Label.Content>
                                </Label>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTextColumn x:Name="colEPC" Width="4*" Header="EPC" Binding="{Binding EPC}" IsReadOnly="true" MinWidth="300" >
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right" />
                                <Setter Property="Padding" Value="8 0 8 0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>

        </Grid>

        <Grid x:Name="RowTwo" Grid.Row="2" Margin="0,4,0,0" VerticalAlignment="Bottom" >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Slider x:Name="Antenna_Gain" Value="{Binding AntennaPower}" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="349" Height="41" Maximum="27" Minimum="5" TickPlacement="TopLeft"/>
            <Label x:Name="lblAntennaPowerSlider" Content="{Binding AntennaPowerLabel}" HorizontalAlignment="Left" VerticalAlignment="Top" Width="349" Height="40" FontSize="18" Margin="0,16,0,0"/>
            <!--<CheckBox Content="Start lap logging on 1st read" IsChecked="{Binding LogOnFirstRead}" HorizontalAlignment="Left" Margin="584,599,0,0" VerticalAlignment="Top" Height="32" Width="206" FontSize="18" VerticalContentAlignment="Center" Padding="4,-1,0,-4"/>-->
            
            <Button x:Name="btnDone" Content="Done" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Right" VerticalAlignment="Bottom" Height="82" Width="226" Click="btnDone_Click"/>

        </Grid>


    </Grid>
</Page>
